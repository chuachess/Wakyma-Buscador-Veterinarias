{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2acd04be07dbac51d9dc","webpack:///./src/js/classes/ContextMenuItemTypes.js","webpack:///./src/js/defaults/index.js","webpack:///./src/js/contextmenu.js","webpack:///./src/js/classes/ContextMenu.js","webpack:///./src/js/classes/ContextMenuOperations.js","webpack:///./src/js/classes/ContextMenuHelper.js","webpack:///./src/js/defaults/position.js","webpack:///./src/js/classes/ContextMenuHtml5Builder.js","webpack:///./src/js/classes/ContextMenuEventHandler.js","webpack:///./src/js/jquery/contextMenuFunction.js"],"names":["root","factory","exports","module","define","amd","ContextMenu","self","this","e","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","value","simple","text","textarea","checkbox","radio","select","html","separator","submenu","_position","selector","appendTo","trigger","autoHide","delay","reposition","hideOnSecondTrigger","selectableSubMenu","className","classNames","hover","disabled","visible","notSelectable","icon","iconEdit","iconCut","iconCopy","iconPaste","iconDelete","iconAdd","iconQuit","iconLoadingClass","zIndex","animation","duration","show","hide","events","$","noop","activated","callback","items","build","types","determinePosition","position","positionSubmenu","r","a","manager","_ContextMenu2","contextMenu","operation","options","execute","getInputValues","currentMenuData","data","setInputValues","fromMenu","element","html5builder","defaults","handle","handler","operations","menus","namespaces","fn","_contextMenuFunction2","ContextMenuItemTypes","_ContextMenuHtml5Builder2","_defaults2","_ContextMenuEventHandler2","_ContextMenuOperations2","initialized","counter","key","normalizedArguments","normalizeArguments","update","create","destroy","html5","Error","buildOptions","document","body","window","each","id","css","_this","$visibleMenu","_hasContext","context","keys","forEach","ns","is","filter","length","contextMenuRoot","$trigger","find","force","$menu","remove","off","$currentTrigger","match","isEmptyObject","itemClick","itemClickEvent","contextMenuItemObj","contextmenu:focus.contextMenu","focusItem","contextmenu:blur.contextMenu","blurItem","contextmenu.contextMenu","abortevent","mouseenter.contextMenu","itemMouseenter","mouseleave.contextMenu","itemMouseleave","on","contextmenu:hide.contextMenu","hideMenu","prevcommand.contextMenu","prevItem","nextcommand.contextMenu","nextItem","menuMouseenter","menuMouseleave","inputClick","contextmenu","mouseenter","mouseleave","click","_this2","menu","userOptions","extend","first","contextMenuData","inputs","item","type","selected","$input","val","prop","ContextMenuOperations","TypeError","menuData","x","y","additionalZValue","_ContextMenuHelper2","zindex","layer","addClass","pos","offset","right","left","outerWidth","bottom","top","outerHeight","$layer","hovering","pageX","pageY","setTimeout","_typeof","removeData","removeClass","$selected","rootMenuData","createNameNode","$name","_accesskey","_beforeAccesskey","append","createTextNode","_afterAccesskey","isHtmlName","accesskey","k","accesskeys","$t","$label","_ContextMenuItemTypes2","$node","contextMenuKey","ak","aks","splitAccesskey","matched","RegExp","commands","callbacks","hasTypes","attr","height","prependTo","then","processPromises","focusInput","blurInput","_icon","substring","support","eventSelectstart","nested","domMenu","display","getBoundingClientRect","Math","ceil","width","minWidth","maxWidth","index","resize","addBack","hasVisibleItems","children","$item","$window","z-index","opacity","background-color","insertBefore","layerClick","style","promise","finishPromiseProcess","errorPromise","errorItem","error","console","log","bind","$menuOffset","winHeight","winScrollTop","scrollTop","menuHeight","overflow-x","overflow-y","ContextMenuHelper","zin","$tt","max","parseInt","parent","indexOf","toLowerCase","split","charAt","toUpperCase","push","ui","my","at","of","collision","offsetParentOffset","offsetParent","scrollLeft","ContextMenuHtml5Builder","node","$this","$children","builder","nodeName","label","inputLabel","clone","_defaults","ContextMenuEventHandler","hoveract","preventDefault","stopImmediatePropagation","currentTarget","originalEvent","mouseButton","hasClass","built","Event","button","$related","relatedTarget","$document","closest","mousemove","timer","clearTimeout","fakeClick","target","triggerAction","elementFromPoint","isContentEditable","range","createRange","sel","getSelection","selectNode","collapse","removeAllRanges","addRange","one","isInput","stopPropagation","targetZIndex","getZIndexOfTriggerTarget","parentElement","keyCode","keyStop","shiftKey","blur","$parent","itemdata","String","fromCharCode","$s","$prev","prev","last","$round","focus","$next","next","targetMenu","join","not","$o","isPlainObject"],"mappings":"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","file":"jquery.contextMenu.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ContextMenu\"] = factory();\n\telse\n\t\troot[\"ContextMenu\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2acd04be07dbac51d9dc","/**\n * @class ContextMenuItem\n * @instance\n * @interface\n * @classdesc The items map contains the commands to list in the menu. Each command has a unique key identifying an item object. The value may either be an item (properties explained below), or a string (which will insert a separator, disregarding the string's content). It is also possible to define a seperator the same as an item, and use the `type`:`cm_separator` to define it.\n\n ```javascript\n var items = {\n  firstCommand: itemOptions,\n  separator1: \"-----\",\n  separator2: { \"type\": \"cm_separator\" },\n  command2: itemOptions,\n  submenu: {\n    type: \"submenu\"\n    submenuItem1: itemOptions,\n    submenuItem2: itemOptions,\n  }\n}\n ```\n\n Since 2.3 it is also possible to use a promise as item, so you can build submenu's based on a snynchronous promis.\n\n Check out the [demo using a promise](demo/async-promise.md) for an example how to use this. The example uses jQuery deferred, but any promise should do. Promised can only be used in combination with the [build option](docs#build).\n\n *\n * @property {ContextMenuItemTypes|string} type - Specifies the type of the command. See {@link ContextMenuItemTypes}.\n * @property {string} name - Specify the human readable name of the command in the menu. This is used as the label for the option.\n * @property {boolean} isHtmlName - Should this item be called with .html() instead of .text(). Cannot be used with the accesskey option in the same item.\n * @property {Object.<string,ContextMenuItem>} items Object containing the menu items for creating a submenu.\n * @property {string} className - Specifies additional classNames to add to the menu item. Seperate multiple classes by using spaces.\n * @property {ContextMenuItemCallback} callback - Specifies the callback to execute if the item is clicked.\n * @property {ContextMenuIconCallback|string} icon - Specifies the icon class to set for the item. When using a string icons must be defined in CSS with selectors like `.context-menu-item.context-menu-icon-edit`, where edit is the icon class specified. When using a callback you can return a class string to use that as the class on the item. You can also modify the element by using the $itemElement argument.\n * @property {ContextMenuItemCallback|boolean} disabled - Specifies if the command is disabled (`true`) or enabled (`false`). May be a callback returning a `boolean`.\n * @property {ContextMenuItemCallback|boolean} visible - Specifies if the command is visible (`true`) or hidden (`false`). May be a callback returning a `boolean`.\n * @property {string} accesskey - Character(s) to be used as accesskey.\n\n Considering `a b c` $.contextMenu will first try to use »a« as the accesskey, if already taken, it'll fall through to `b`. Words are reduced to the first character, so `hello world` is treated as `h w`.\n\n Note: Accesskeys are treated unique throughout one menu. This means an item in a sub-menu can't occupy the same accesskey as an item in the main menu.\n *\n * @property {?JQuery} $input - The input element if it was build for this item.\n * @property {Object<string, Function>} events - Events to register on a {@link ContextMenuItem}. The contents of the options object are passed as jQuery `e.data`.\n * @property {string} value - The value of the `<input>` element.\n * @property {boolean|string} selected - The selected option of a `select` element and the checked property for `checkbox` and `radio` {@link ContextMenuItemTypes}.\n * @property {string} radio - Specifies the group of the `radio` element.\n * @property {string} options - Specifies the options of the `select` element.\n * @property {Number} height - The height in pixels `<textarea>` element. If not specified, the height is defined by CSS.\n */\n\n/**\n * Possible ContextMenuItem types\n * @enum string\n */\nconst ContextMenuItemTypes = {\n    /**\n     * The command is a simple clickable item.\n     */\n    simple: '',\n\n    /**\n     * Makes the command an &lt;input&gt; of type text. The name followed by the &lt;input&gt; are encapsulated in a &lt;label&gt;.\n     */\n    text: 'text',\n\n    /**\n     * Makes the command a &lt;textarea&gt;. The name followed by the &lt;textarea&gt; are encapsulated in a &lt;label&gt;.\n     */\n    textarea: 'textarea',\n\n    /**\n     * Makes the command an &lt;input&gt; of type checkbox. The name followed by the &lt;input&gt; are encapsulated in a &lt;label&gt;.\n     */\n    checkbox: 'checkbox',\n\n    /**\n     * Makes the command an &lt;input&gt; of type radio. The name followed by the &lt;input&gt; are encapsulated in a &lt;label&gt;.\n     */\n    radio: 'radio',\n\n    /**\n     * Makes the command aa &lt;select&gt;. The name followed by the &lt;select&gt; are encapsulated in a &lt;label&gt;.\n     */\n    select: 'select',\n\n    /**\n     * Makes an non-command element. When you select `type: 'html'` add the html to the html property. So: `{ item: { type: 'html', html: '<span>html!</span>' } }`. You can also just use the item name with the `isHtmlName` property.\n     */\n    html: 'html',\n\n    /**\n     * Internal property, used internally when the type is set to a string.\n     */\n    separator: 'cm_separator',\n\n    /**\n     * Internal property for a {@link ContextMenuItem} that has an `items` property with other {@link ContextMenuItem} items.\n     */\n    submenu: 'sub'\n};\n\nexport default ContextMenuItemTypes;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/classes/ContextMenuItemTypes.js","import {determinePosition, positionSubmenu, position} from './position';\n\n/**\n * @class ContextMenuData\n * @augments ContextMenuOptions\n * @instance\n * @interface\n *\n * @property {JQuery} $menu - The menu element for this menu part. Eg. the root menu, or a single submenu.\n * @property {JQuery} $layer - The opened layer when the menu is opened.\n * @property {JQuery} $node - The menu node.\n * @property {JQuery} $trigger - The element that triggered opening the menu.\n * @property {JQuery} $selected - Reference to the `<li>` command element.\n * @property {JQuery} $input - Reference to the `<input>` or `<select>` of the command element.\n * @property {JQuery} $label - Reference to the `<input>` or `<select>` of the command element.\n * @property {string} ns - The namespace (including leading dot) all events for this contextMenu instance were registered under.\n * @property {ContextMenu} manager - The contextmenu manager instance.\n * @property {JQuery|jQuery|null} $selected - Currently selected menu item, or input inside menu item.\n * @property {?boolean} hasTypes - The menu has ContextMenuItem which are of a selectable type.\n * @property {?boolean} isInput - We are currently originating events from an input.\n * @property {Object<string, ContextMenuItem>} inputs - Inputs defined in the menu.\n * @property {Object<string, ContextMenuItemTypeCallback>} types - Custom ContextMenuItemTypes, key is the {@link ContextMenuItem} type property, value is a {@link ContextMenuItemTypeCallback} callback.\n *\n * @property {boolean} hovering Currently hovering, root menu only.\n */\n\n/**\n * @class ContextMenuOptions\n * @instance\n * @interface\n * @classdesc\n ## Register new contextMenu\n\n To register a new contextMenu:\n\n ```javascript\n $.contextMenu( contextMenuOptions );\n ```\n\n ## Update contextMenu state\n\n It is possible to refresh the state of the contextmenu [disabled](https://swisnl.github.io/jQuery-contextMenu/docs/items.html#disabled), [visibility](https://swisnl.github.io/jQuery-contextMenu/docs/items.html#visible), [icons](https://swisnl.github.io/jQuery-contextMenu/docs/items.html#icon) and [input values](https://swisnl.github.io/jQuery-contextMenu/docs/items.html#type) through the `update` command. This will reevaluate any custom callbacks.\n\n ```javascript\n $('.context-menu-one').contextMenu('update'); // update single menu\n $.contextMenu('update') // update all open menus\n ```\n\n * @property {null|string} selector - Selector on which the contextMenu triggers.\n * @property {Object.<string, ContextMenuItem>} items - Object with items to be listed in contextMenu. See {@link ContextMenuItem} for a full documentation on how to build your menu items.\n * @property {JQuery.Selector|DOMElement} [appendTo=document.body] - Specifies the selector `string` or `DOMElement` the generated menu is to be appended to.\n * @property {('right'|'left'|'hover'|'touchstart'|'none')} trigger=left - Method to trigger context menu [\"right\", \"left\", \"hover\", \"touchstart\", \"none\"].\n * @property {?string} itemClickEvent - Allows the selection of the click event instead of the mouseup event to handle the user mouse interaction with the contexMenu. The default event is `mouseup`. Set the option to `\"click\"` to change to the `click` event.\n\n This option is global: the first contexMenu registered sets it. To change it afterwards all the contextMenu have to be unregistered with `$.contextMenu( 'destroy' );` before the change has effect again.\n\n * @property {boolean} hideOnSecondTrigger=false - Flag denoting if a second trigger should close the menu, as long as the trigger happened on one of the trigger-element's child nodes. This overrides the reposition option.\n * @property {boolean} selectableSubMenu=false - Ability to select ContextMenuItem containing a submenu.\n * @property {boolean} reposition=true - flag denoting if a second trigger should simply move (`true`) or rebuild (`false`) an open menu as long as the trigger happened on one of the trigger-element's child nodes\n * @property {number} delay=200 - ms to wait before showing a hover-triggered context menu.\n * @property {boolean} autoHide=true - Hide menu when mouse leaves trigger / menu elements.\n * @property {number|Function} zIndex=1 - offset to add to zIndex\n * @property {string} className - Class to be appended to the root menu.\n * @property {Object} classNames - Default classname configuration to be able avoid conflicts in frameworks.\n * @property {string} classNames.hover=context-menu-hover\n * @property {string} classNames.disabled=context-menu-disabled\n * @property {string} classNames.visible=context-menu-visible\n * @property {string} classNames.notSelectable=context-menu-not-selectable\n * @property {string} classNames.icon=context-menu-icon\n * @property {string} classNames.iconEdit=context-menu-icon-edit\n * @property {string} classNames.iconCut=context-menu-icon-cut\n * @property {string} classNames.iconCopy=context-menu-icon-copy\n * @property {string} classNames.iconPaste=context-menu-icon-paste\n * @property {string} classNames.iconDelete=context-menu-icon-delete\n * @property {string} classNames.iconAdd=context-menu-icon-add\n * @property {string} classNames.iconQuit=context-menu-icon-quit\n * @property {string} classNames.iconLoadingClass=context-menu-icon-loading\n * @property {Object} animation - Animation settings\n * @property {number} animation.duration=50\n * @property {string} animation.show='slideDown'\n * @property {string} animation.hide='slideUp'\n * @property {Object} events - Event callbacks. This is the trigger element, first argument is the event, and the second argumant {@link ContextMenuData}.\n * @property {Function} events.show - Called when contextmenu is shown.\n * @property {Function} events.hide - Called when contextmenu is hidden.\n * @property {Function} events.activated - Called when contextmenu is activated.\n * @property {ContextMenuItemCallback} callback - Global callback called then a {@link ContextMenuItem} is clicked.\n * @property {ContextMenuBuildCallback} build=false\n * @property {(position)} position - Callback to override the position of the context menu. The function is executed in the context of the trigger object.\n\n The first argument is a jQuery.Event. The second argument is the {@link ContextMenuData} object, which has a `$menu` property with the menu that needs to be positioned. The third and fourth arguments are `x` and `y` coordinates provided by the show event.\n\n The `x` and `y` may either be integers denoting the offset from the top left corner, undefined, or the string \"maintain\". If the string \"maintain\" is provided, the current position of the `$menu` must be used. If the coordinates are `undefined`, appropriate coordinates must be determined. An example of how this can be achieved is provided with {@link determinePosition}.\n\n * @property {(determinePosition)} determinePosition\n * @property {(positionSubmenu)} positionSubmenu - Callback tha positions a submenu\n * @property {boolean} _hasContext - Set to true if the call was done from an element.\n */\nexport default {\n    selector: null,\n\n    // where to append the menu to\n    appendTo: null,\n\n    // method to trigger context menu [\"right\", \"left\", \"hover\"]\n    trigger: 'right',\n\n    // hide menu when mouse leaves trigger / menu elements\n    autoHide: false,\n\n    // ms to wait before showing a hover-triggered context menu\n    delay: 200,\n\n    // flag denoting if a second trigger should simply move (true) or rebuild (false) an open menu\n    // as long as the trigger happened on one of the trigger-element's child nodes\n    reposition: true,\n\n    // Flag denoting if a second trigger should close the menu, as long as\n    // the trigger happened on one of the trigger-element's child nodes.\n    // This overrides the reposition option.\n    hideOnSecondTrigger: false,\n\n    // ability to select submenu\n    selectableSubMenu: false,\n\n    className: '',\n\n    // Default classname configuration to be able avoid conflicts in frameworks\n    classNames: {\n        hover: 'context-menu-hover', // Item hover\n        disabled: 'context-menu-disabled', // Item disabled\n        visible: 'context-menu-visible', // Item visible\n        notSelectable: 'context-menu-not-selectable', // Item not selectable\n\n        icon: 'context-menu-icon',\n        iconEdit: 'context-menu-icon-edit',\n        iconCut: 'context-menu-icon-cut',\n        iconCopy: 'context-menu-icon-copy',\n        iconPaste: 'context-menu-icon-paste',\n        iconDelete: 'context-menu-icon-delete',\n        iconAdd: 'context-menu-icon-add',\n        iconQuit: 'context-menu-icon-quit',\n        iconLoadingClass: 'context-menu-icon-loading'\n    },\n\n    // offset to add to zIndex\n    zIndex: 1,\n\n    // show hide animation settings\n    animation: {\n        duration: 50,\n        show: 'slideDown',\n        hide: 'slideUp'\n    },\n\n    // events\n    events: {\n        show: $.noop,\n        hide: $.noop,\n        activated: $.noop\n    },\n\n    // default callback\n    callback: null,\n\n    // list of contextMenu items\n    items: {},\n\n    // Build callback for creating a menu dynamicly\n    build: false,\n\n    types: {},\n\n    // determine position to show menu at\n    determinePosition,\n\n    // position menu\n    position,\n\n    // position the sub-menu\n    positionSubmenu\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/defaults/index.js","'use strict';\nimport '../sass/jquery.contextMenu.scss';\nimport ContextMenu from './classes/ContextMenu';\nimport ContextMenuItemTypes from './classes/ContextMenuItemTypes';\nimport elementFunction from './jquery/contextMenuFunction';\n\n/**\n * The jQuery namespace.\n * @external \"jQuery\"\n * @see {@link http://docs.jquery.com/Plugins/Authoring The jQuery Plugin Guide}\n */\n\n/**\n * @class jQuery.contextMenu\n * @function external:jQuery.contextMenu\n * @instance\n *\n * @param {string} operation\n * @param {ContextMenuOptions} options\n *\n * @property {ContextMenu} manager\n * @property {getInputValues} getInputValues\n * @property {setInputValues} setInputValues\n * @property {fromMenu} ContextMenuHtml5Builder#fromMenu\n * @property {ContextMenuOptions} defaults\n * @property {ContextMenuEventHandler} handle\n * @property {ContextMenuOperations} operations\n * @property {Object<string, ContextMenuData>} menus\n */\nconst manager = new ContextMenu();\n\n// manage contextMenu instances\nlet contextMenu = function (operation, options) {\n    manager.execute(operation, options);\n};\n\ncontextMenu.getInputValues = function (currentMenuData, data) {\n    return manager.getInputValues(currentMenuData, data);\n};\ncontextMenu.setInputValues = function (currentMenuData, data) {\n    return manager.getInputValues(currentMenuData, data);\n};\ncontextMenu.fromMenu = function (element) {\n    return manager.html5builder.fromMenu(element);\n};\n\n// make defaults accessible\ncontextMenu.defaults = manager.defaults;\ncontextMenu.types = manager.defaults.types;\ncontextMenu.manager = manager;\n\n// export internal functions - undocumented, for hacking only!\ncontextMenu.handle = manager.handler;\ncontextMenu.operations = manager.operations;\ncontextMenu.menus = manager.menus;\ncontextMenu.namespaces = manager.namespaces;\n\n$.fn.contextMenu = elementFunction;\n$.contextMenu = contextMenu;\n\nmodule.exports = {ContextMenu, ContextMenuItemTypes};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/contextmenu.js","import ContextMenuOperations from './ContextMenuOperations';\nimport defaults from '../defaults';\nimport ContextMenuHtml5Builder from './ContextMenuHtml5Builder';\nimport ContextMenuEventHandler from './ContextMenuEventHandler';\n\nexport default class ContextMenu {\n    /**\n     * @constructor\n     * @constructs ContextMenu\n     * @classdesc The ContextMenu is the core class that manages contextmenu's. You can call this class directly and skip going through jQuery.\n     * @class ContextMenu\n     *\n     * @example\n     * // You can call this class directly and skip going through jQuery, although it still requires jQuery to run.\n     * const manager = new ContextMenu();\n     * manager.execute(\"create\", options);\n     *\n     * @property {ContextMenuOptions|Object} defaults\n     * @property {ContextMenuEventHandler} handle\n     * @property {ContextMenuOperations} operations\n     * @property {Object<string, ContextMenuData>} menus\n     * @property {number} counter - Internal counter to keep track of different menu's on the page.\n     * @property {boolean} initialized - Flag the menu as initialized.\n     */\n    constructor() {\n        this.html5builder = new ContextMenuHtml5Builder();\n        this.defaults = defaults;\n        this.handler = new ContextMenuEventHandler();\n        this.operations = new ContextMenuOperations();\n        this.namespaces = {};\n        this.initialized = false;\n        this.menus = {};\n        this.counter = 0;\n    }\n\n    /**\n     * @method execute\n     * @memberOf ContextMenu\n     * @instance\n     *\n     * @param {(string|ContextMenuOptions)} operation\n     * @param {(string|ContextMenuOptions)} options\n     * @return {ContextMenu}\n     */\n    execute(operation, options) {\n        const normalizedArguments = this.normalizeArguments(operation, options);\n        operation = normalizedArguments.operation;\n        options = normalizedArguments.options;\n\n        switch (operation) {\n            case 'update':\n                // Updates visibility and such\n                this.update(options);\n                break;\n\n            case 'create':\n                // no selector no joy\n                this.create(options);\n                break;\n\n            case 'destroy':\n                this.destroy(options);\n                break;\n\n            case 'html5':\n                this.html5(options);\n                break;\n\n            default:\n                throw new Error('Unknown operation \"' + operation + '\"');\n        }\n\n        return this;\n    }\n\n    /**\n     * if <menuitem> is not handled by the browser, or options was a bool true, initialize $.contextMenu for them.\n     * @method html5\n     * @memberOf ContextMenu\n     *\n     * @param {ContextMenuOptions|boolean} options\n     */\n    html5(options) {\n        options = this.buildOptions(options);\n\n        const menuItemSupport = ('contextMenu' in document.body && 'HTMLMenuItemElement' in window);\n\n        if (!menuItemSupport || (typeof options === 'boolean' && options === true)) {\n            $('menu[type=\"context\"]').each(function () {\n                if (this.id) {\n                    $.contextMenu({\n                        selector: '[contextmenu=' + this.id + ']',\n                        items: $.contextMenu.fromMenu(this)\n                    });\n                }\n            }).css('display', 'none');\n        }\n    }\n\n    /**\n     * Destroy the ContextMenu\n     * @method destroy\n     * @memberOf ContextMenu\n     *\n     * @param {ContextMenuOptions} options\n     */\n    destroy(options) {\n        options = this.buildOptions(options);\n\n        let $visibleMenu;\n        if (options._hasContext) {\n            // get proper options\n            const context = options.context;\n\n            Object.keys(this.menus).forEach((ns) => {\n                let o = this.menus[ns];\n\n                if (!o) {\n                    return true;\n                }\n\n                // Is this menu equest to the context called from\n                if (!$(context).is(o.selector)) {\n                    return true;\n                }\n\n                $visibleMenu = $('.context-menu-list').filter(':visible');\n                if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is($(o.context).find(o.selector))) {\n                    $visibleMenu.trigger('contextmenu:hide', {force: true});\n                }\n\n                if (this.menus[o.ns].$menu) {\n                    this.menus[o.ns].$menu.remove();\n                }\n                delete this.menus[o.ns];\n\n                $(o.context).off(o.ns);\n                return true;\n            });\n        } else if (!options.selector) {\n            $(document).off('.contextMenu .contextMenuAutoHide');\n\n            Object.keys(this.menus).forEach((ns) => {\n                let o = this.menus[ns];\n                $(o.context).off(o.ns);\n            });\n\n            this.namespaces = {};\n            this.menus = {};\n            this.counter = 0;\n            this.initialized = false;\n\n            $('#context-menu-layer, .context-menu-list').remove();\n        } else if (this.namespaces[options.selector]) {\n            $visibleMenu = $('.context-menu-list').filter(':visible');\n            if ($visibleMenu.length && $visibleMenu.data().contextMenuRoot.$trigger.is(options.selector)) {\n                $visibleMenu.trigger('contextmenu:hide', {force: true});\n            }\n\n            if (this.menus[this.namespaces[options.selector]].$menu) {\n                this.menus[this.namespaces[options.selector]].$menu.remove();\n            }\n            delete this.menus[this.namespaces[options.selector]];\n\n            $(document).off(this.namespaces[options.selector]);\n        }\n        this.handler.$currentTrigger = null;\n    }\n\n    /**\n     * Create a ContextMenu\n     * @method create\n     * @memberOf ContextMenu\n     *\n     * @param {ContextMenuOptions} options\n     */\n    create(options) {\n        options = this.buildOptions(options);\n\n        if (!options.selector) {\n            throw new Error('No selector specified');\n        }\n        // make sure internal classes are not bound to\n        if (options.selector.match(/.context-menu-(list|item|input)($|\\s)/)) {\n            throw new Error('Cannot bind to selector \"' + options.selector + '\" as it contains a reserved className');\n        }\n        if (!options.build && (!options.items || $.isEmptyObject(options.items))) {\n            throw new Error('No Items specified');\n        }\n        this.counter++;\n        options.ns = '.contextMenu' + this.counter;\n        if (!options._hasContext) {\n            this.namespaces[options.selector] = options.ns;\n        }\n        this.menus[options.ns] = options;\n\n        // default to right click\n        if (!options.trigger) {\n            options.trigger = 'right';\n        }\n\n        if (!this.initialized) {\n            const itemClick = options.itemClickEvent === 'click' ? 'click.contextMenu' : 'mouseup.contextMenu';\n            const contextMenuItemObj = {\n                // 'mouseup.contextMenu': this.handler.itemClick,\n                // 'click.contextMenu': this.handler.itemClick,\n                'contextmenu:focus.contextMenu': this.handler.focusItem,\n                'contextmenu:blur.contextMenu': this.handler.blurItem,\n                'contextmenu.contextMenu': this.handler.abortevent,\n                'mouseenter.contextMenu': this.handler.itemMouseenter,\n                'mouseleave.contextMenu': this.handler.itemMouseleave\n            };\n            contextMenuItemObj[itemClick] = this.handler.itemClick;\n\n            // make sure item click is registered first\n            $(document)\n                .on({\n                    'contextmenu:hide.contextMenu': this.handler.hideMenu,\n                    'prevcommand.contextMenu': this.handler.prevItem,\n                    'nextcommand.contextMenu': this.handler.nextItem,\n                    'contextmenu.contextMenu': this.handler.abortevent,\n                    'mouseenter.contextMenu': this.handler.menuMouseenter,\n                    'mouseleave.contextMenu': this.handler.menuMouseleave\n                }, '.context-menu-list')\n                .on('mouseup.contextMenu', '.context-menu-input', this.handler.inputClick)\n                .on(contextMenuItemObj, '.context-menu-item');\n\n            this.initialized = true;\n        }\n\n        // engage native contextmenu event\n        options.context\n            .on('contextmenu' + options.ns, options.selector, options, this.handler.contextmenu);\n\n        switch (options.trigger) {\n            case 'hover':\n                options.context\n                    .on('mouseenter' + options.ns, options.selector, options, this.handler.mouseenter)\n                    .on('mouseleave' + options.ns, options.selector, options, this.handler.mouseleave);\n                break;\n\n            case 'left':\n                options.context.on('click' + options.ns, options.selector, options, this.handler.click);\n                break;\n            case 'touchstart':\n                options.context.on('touchstart' + options.ns, options.selector, options, this.handler.click);\n                break;\n            /*\n                     default:\n                     // http://www.quirksmode.org/dom/events/contextmenu.html\n                     $document\n                     .on('mousedown' + o.ns, o.selector, o, this.handler.mousedown)\n                     .on('mouseup' + o.ns, o.selector, o, this.handler.mouseup);\n                     break;\n                     */\n        }\n\n        // create menu\n        if (!options.build) {\n            this.operations.create(null, options);\n        }\n    }\n\n    /**\n     * Update the ContextMenu or all ContextMenu's\n     * @method update\n     * @memberOf ContextMenu\n     *\n     * @param {ContextMenuOptions} options\n     */\n    update(options) {\n        options = this.buildOptions(options);\n\n        if (options._hasContext) {\n            this.operations.update(null, $(options.context).data('contextMenu'), $(options.context).data('contextMenuRoot'));\n        } else {\n            Object.keys(this.menus).forEach((menu) => {\n                this.operations.update(null, this.menus[menu]);\n            });\n        }\n    }\n\n    /**\n     * Build the options, by applying the Manager, defaults, user options and normalizing the context.\n     * @method buildOptions\n     * @memberOf ContextMenu\n     *\n     * @param {ContextMenuOptions} userOptions\n     * @return {ContextMenuOptions}\n     */\n    buildOptions(userOptions) {\n        if (typeof userOptions === 'string') {\n            userOptions = {selector: userOptions};\n        }\n\n        const options = $.extend(true, {manager: this}, this.defaults, userOptions);\n\n        if (!options.context || !options.context.length) {\n            options.context = $(document);\n            options._hasContext = false;\n        } else {\n            // you never know what they throw at you...\n            options.context = $(options.context).first();\n            options._hasContext = !$(options.context).is($(document));\n        }\n        return options;\n    }\n\n    /**\n     * @method normalizeArguments\n     * @memberOf ContextMenu\n     *\n     * @param {string|Object} operation\n     * @param {string|Object|ContextMenuOptions} options\n     * @returns {{operation: string, options: ContextMenuOptions}}\n     */\n    normalizeArguments(operation, options) {\n        if (typeof operation !== 'string') {\n            options = operation;\n            operation = 'create';\n        }\n\n        if (typeof options === 'string') {\n            options = {selector: options};\n        } else if (typeof options === 'undefined') {\n            options = {};\n        }\n        return {operation, options};\n    }\n\n    /**\n     * import values into `<input>` commands\n     *\n     * @method setInputValues\n     * @memberOf ContextMenu\n     * @instance\n     *\n     * @param {ContextMenuData} contextMenuData - {@link ContextMenuData} object\n     * @param {Object} data - Values to set\n     * @return {undefined}\n     */\n    setInputValues(contextMenuData, data) {\n        if (typeof data === 'undefined') {\n            data = {};\n        }\n\n        $.each(contextMenuData.inputs, function (key, item) {\n            switch (item.type) {\n                case 'text':\n                case 'textarea':\n                    item.value = data[key] || '';\n                    break;\n\n                case 'checkbox':\n                    item.selected = !!data[key];\n                    break;\n\n                case 'radio':\n                    item.selected = (data[item.radio] || '') === item.value;\n                    break;\n\n                case 'select':\n                    item.selected = data[key] || '';\n                    break;\n            }\n        });\n    }\n\n    /**\n     * export values from `<input>` commands\n     *\n     * @method getInputValues\n     * @memberOf ContextMenu\n     * @instance\n     *\n     * @param {ContextMenuData} contextMenuData - {@link ContextMenuData} object\n     * @param {Object} data - Values object\n     * @return {Object} - Values of input elements\n     */\n    getInputValues(contextMenuData, data) {\n        if (typeof data === 'undefined') {\n            data = {};\n        }\n\n        $.each(contextMenuData.inputs, function (key, item) {\n            switch (item.type) {\n                case 'text':\n                case 'textarea':\n                case 'select':\n                    data[key] = item.$input.val();\n                    break;\n\n                case 'checkbox':\n                    data[key] = item.$input.prop('checked');\n                    break;\n\n                case 'radio':\n                    if (item.$input.prop('checked')) {\n                        data[item.radio] = item.value;\n                    }\n                    break;\n            }\n        });\n\n        return data;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/classes/ContextMenu.js","import ContextMenuHelper from './ContextMenuHelper';\nimport ContextMenuItemTypes from './ContextMenuItemTypes';\n\nexport default class ContextMenuOperations {\n    /**\n     * @constructor\n     * @constructs ContextMenuOperations\n     */\n    constructor() {\n        return this;\n    }\n\n    /**\n     * Show the menu.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData} menuData\n     * @param {number} x\n     * @param {number} y\n     */\n    show(e, menuData, x, y) {\n        const $trigger = $(this);\n        const css = {};\n\n        // hide any open menus\n        $('#context-menu-layer').trigger('mousedown');\n\n        // backreference for callbacks\n        menuData.$trigger = $trigger;\n\n        // show event\n        if (menuData.events.show.call($trigger, e, menuData) === false) {\n            menuData.manager.handler.$currentTrigger = null;\n            return;\n        }\n\n        // create or update context menu\n        let hasVisibleItems = menuData.manager.operations.update.call($trigger, e, menuData);\n\n        if (hasVisibleItems === false) {\n            menuData.manager.handler.$currentTrigger = null;\n            return;\n        }\n        // position menu\n        menuData.position.call($trigger, e, menuData, x, y);\n\n        // make sure we're in front\n        if (menuData.zIndex) {\n            let additionalZValue = menuData.zIndex;\n            // If menuData.zIndex is a function, call the function to get the right zIndex.\n            if (typeof menuData.zIndex === 'function') {\n                additionalZValue = menuData.zIndex.call($trigger, menuData);\n            }\n            css.zIndex = ContextMenuHelper.zindex($trigger) + additionalZValue;\n        }\n\n        // add layer\n        menuData.manager.operations.layer.call(menuData.$menu, e, menuData, css.zIndex);\n\n        // adjust sub-menu zIndexes\n        menuData.$menu.find('ul').css('zIndex', css.zIndex + 1);\n\n        // position and show context menu\n        menuData.$menu.css(css)[menuData.animation.show](menuData.animation.duration, () => {\n            $trigger.trigger('contextmenu:visible');\n\n            menuData.manager.operations.activated(e, menuData);\n            menuData.events.activated($trigger, e, menuData);\n        });\n        // make options available and set state\n        $trigger\n            .data('contextMenu', menuData)\n            .addClass('context-menu-active');\n\n        // register key handler\n        $(document).off('keydown.contextMenu').on('keydown.contextMenu', menuData, menuData.manager.handler.key);\n        // register autoHide handler\n        if (menuData.autoHide) {\n            // mouse position handler\n            $(document).on('mousemove.contextMenuAutoHide', (e) => {\n                // need to capture the offset on mousemove,\n                // since the page might've been scrolled since activation\n                const pos = $trigger.offset();\n                pos.right = pos.left + $trigger.outerWidth();\n                pos.bottom = pos.top + $trigger.outerHeight();\n\n                if (menuData.$layer && !menuData.hovering && (!(e.pageX >= pos.left && e.pageX <= pos.right) || !(e.pageY >= pos.top && e.pageY <= pos.bottom))) {\n                    /* Additional hover check after short time, you might just miss the edge of the menu */\n                    setTimeout(() => {\n                        if (!menuData.hovering && menuData.$menu !== null && typeof menuData.$menu !== 'undefined') {\n                            menuData.$menu.trigger('contextmenu:hide');\n                        }\n                    }, 50);\n                }\n            });\n        }\n    }\n\n    /**\n     * Hide the menu.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData} menuData\n     * @param {boolean} force\n     */\n    hide(e, menuData, force) {\n        const $trigger = $(this);\n        if (typeof menuData !== 'object' && $trigger.data('contextMenu')) {\n            menuData = $trigger.data('contextMenu');\n        } else if (typeof menuData !== 'object') {\n            return;\n        }\n\n        // hide event\n        if (!force && menuData.events && menuData.events.hide.call($trigger, e, menuData) === false) {\n            return;\n        }\n\n        // remove options and revert state\n        $trigger\n            .removeData('contextMenu')\n            .removeClass('context-menu-active');\n\n        if (menuData.$layer) {\n            // keep layer for a bit so the contextmenu event can be aborted properly by opera\n            setTimeout((function ($layer) {\n                return function () {\n                    $layer.remove();\n                };\n            })(menuData.$layer), 10);\n\n            try {\n                delete menuData.$layer;\n            } catch (e) {\n                menuData.$layer = null;\n            }\n        }\n\n        // remove handle\n        menuData.manager.handler.$currentTrigger = null;\n        // remove selected\n        menuData.$menu.find('.' + menuData.classNames.hover).trigger('contextmenu:blur');\n        menuData.$selected = null;\n        // collapse all submenus\n        menuData.$menu.find('.' + menuData.classNames.visible).removeClass(menuData.classNames.visible);\n        // unregister key and mouse handlers\n        $(document).off('.contextMenuAutoHide').off('keydown.contextMenu');\n        // hide menu\n        if (menuData.$menu) {\n            menuData.$menu[menuData.animation.hide](menuData.animation.duration, () => {\n                // tear down dynamically built menu after animation is completed.\n                if (menuData.build) {\n                    menuData.$menu.remove();\n                    Object.keys(menuData).forEach((key) => {\n                        switch (key) {\n                            case 'ns':\n                            case 'selector':\n                            case 'build':\n                            case 'trigger':\n                                return true;\n\n                            default:\n                                menuData[key] = undefined;\n                                try {\n                                    delete menuData[key];\n                                } catch (e) {\n                                }\n                                return true;\n                        }\n                    });\n                }\n\n                setTimeout(() => {\n                    $trigger.trigger('contextmenu:hidden');\n                }, 10);\n            });\n        }\n    }\n\n    /**\n     * Create a menu based on the options. Also created submenus.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData} currentMenuData\n     * @param {ContextMenuData?} rootMenuData\n     */\n    create(e, currentMenuData, rootMenuData) {\n        if (typeof rootMenuData === 'undefined') {\n            rootMenuData = currentMenuData;\n        }\n\n        // create contextMenu\n        currentMenuData.$menu = $('<ul class=\"context-menu-list\"></ul>').addClass(currentMenuData.className || '').data({\n            'contextMenu': currentMenuData,\n            'contextMenuRoot': rootMenuData\n        });\n\n        ['callbacks', 'commands', 'inputs'].forEach((k) => {\n            currentMenuData[k] = {};\n            if (!rootMenuData[k]) {\n                rootMenuData[k] = {};\n            }\n        });\n\n        if (!rootMenuData.accesskeys) {\n            rootMenuData.accesskeys = {};\n        }\n\n        function createNameNode(item) {\n            const $name = $('<span></span>');\n            if (item._accesskey) {\n                if (item._beforeAccesskey) {\n                    $name.append(document.createTextNode(item._beforeAccesskey));\n                }\n                $('<span></span>')\n                    .addClass('context-menu-accesskey')\n                    .text(item._accesskey)\n                    .appendTo($name);\n                if (item._afterAccesskey) {\n                    $name.append(document.createTextNode(item._afterAccesskey));\n                }\n            } else {\n                if (item.isHtmlName) {\n                    // restrict use with access keys\n                    if (typeof item.accesskey !== 'undefined') {\n                        throw new Error('accesskeys are not compatible with HTML names and cannot be used together in the same item');\n                    }\n                    $name.html(item.name);\n                } else {\n                    $name.text(item.name);\n                }\n            }\n            return $name;\n        }\n\n        // create contextMenu items\n        Object.keys(currentMenuData.items).forEach((key) => {\n            let item = currentMenuData.items[key];\n            let $t = $('<li class=\"context-menu-item\"></li>').addClass(item.className || '');\n            let $label = null;\n            let $input = null;\n\n            // iOS needs to see a click-event bound to an element to actually\n            // have the TouchEvents infrastructure trigger the click event\n            $t.on('click', $.noop);\n\n            // Make old school string separator a real item so checks wont be\n            // awkward later.\n            // And normalize 'cm_separator' into 'cm_separator'.\n            if (typeof item === 'string' || item.type === 'cm_seperator') {\n                item = {type: ContextMenuItemTypes.separator};\n            }\n\n            item.$node = $t.data({\n                'contextMenu': currentMenuData,\n                'contextMenuRoot': rootMenuData,\n                'contextMenuKey': key\n            });\n\n            // register accesskey\n            // NOTE: the accesskey attribute should be applicable to any element, but Safari5 and Chrome13 still can't do that\n            if (typeof item.accesskey !== 'undefined') {\n                const aks = ContextMenuHelper.splitAccesskey(item.accesskey);\n                for (let i = 0, ak; ak = aks[i]; i++) {\n                    if (!rootMenuData.accesskeys[ak]) {\n                        rootMenuData.accesskeys[ak] = item;\n                        const matched = item.name.match(new RegExp('^(.*?)(' + ak + ')(.*)$', 'i'));\n                        if (matched) {\n                            item._beforeAccesskey = matched[1];\n                            item._accesskey = matched[2];\n                            item._afterAccesskey = matched[3];\n                        }\n                        break;\n                    }\n                }\n            }\n\n            if (item.type && rootMenuData.types[item.type]) {\n                // run custom type handler\n                rootMenuData.types[item.type].call($t, e, item, currentMenuData, rootMenuData);\n                // register commands\n                [currentMenuData, rootMenuData].forEach((k) => {\n                    k.commands[key] = item;\n                    // Overwrite only if undefined or the item is appended to the rootMenuData. This so it\n                    // doesn't overwrite callbacks of rootMenuData elements if the name is the same.\n                    if (typeof item.callback === 'function' && (typeof k.callbacks[key] === 'undefined' || typeof currentMenuData.type === 'undefined')) {\n                        k.callbacks[key] = item.callback;\n                    }\n                });\n            } else {\n                // add label for input\n                if (item.type === ContextMenuItemTypes.separator) {\n                    $t.addClass('context-menu-separator ' + rootMenuData.classNames.notSelectable);\n                } else if (item.type === ContextMenuItemTypes.html) {\n                    $t.addClass('context-menu-html ' + rootMenuData.classNames.notSelectable);\n                } else if (item.type && item.type !== ContextMenuItemTypes.submenu) {\n                    $label = $('<label></label>').appendTo($t);\n                    createNameNode(item).appendTo($label);\n\n                    $t.addClass('context-menu-input');\n                    currentMenuData.hasTypes = true;\n                    [currentMenuData, rootMenuData].forEach((k) => {\n                        k.commands[key] = item;\n                        k.inputs[key] = item;\n                    });\n                } else if (item.items) {\n                    item.type = ContextMenuItemTypes.submenu;\n                }\n\n                switch (item.type) {\n                    case ContextMenuItemTypes.separator:\n                        break;\n\n                    case ContextMenuItemTypes.text:\n                        $input = $('<input type=\"text\" value=\"1\" name=\"\" />')\n                            .attr('name', 'context-menu-input-' + key)\n                            .val(item.value || '')\n                            .appendTo($label);\n                        break;\n\n                    case ContextMenuItemTypes.textarea:\n                        $input = $('<textarea name=\"\"></textarea>')\n                            .attr('name', 'context-menu-input-' + key)\n                            .val(item.value || '')\n                            .appendTo($label);\n\n                        if (item.height) {\n                            $input.height(item.height);\n                        }\n                        break;\n\n                    case ContextMenuItemTypes.checkbox:\n                        $input = $('<input type=\"checkbox\" value=\"1\" name=\"\" />')\n                            .attr('name', 'context-menu-input-' + key)\n                            .val(item.value || '')\n                            .prop('checked', !!item.selected)\n                            .prependTo($label);\n                        break;\n\n                    case ContextMenuItemTypes.radio:\n                        $input = $('<input type=\"radio\" value=\"1\" name=\"\" />')\n                            .attr('name', 'context-menu-input-' + item.radio)\n                            .val(item.value || '')\n                            .prop('checked', !!item.selected)\n                            .prependTo($label);\n                        break;\n\n                    case ContextMenuItemTypes.select:\n                        $input = $('<select name=\"\"></select>')\n                            .attr('name', 'context-menu-input-' + key)\n                            .appendTo($label);\n                        if (item.options) {\n                            Object.keys(item.options).forEach((value) => {\n                                $('<option></option>').val(value).text(item.options[value]).appendTo($input);\n                            });\n                            $input.val(item.selected);\n                        }\n                        break;\n\n                    case ContextMenuItemTypes.submenu:\n                        createNameNode(item).appendTo($t);\n                        item.appendTo = item.$node;\n                        $t.data('contextMenu', item).addClass('context-menu-submenu');\n                        item.callback = null;\n\n                        // If item contains items, and this is a promise, we should create it later\n                        // check if subitems is of type promise. If it is a promise we need to create\n                        // it later, after promise has been resolved.\n                        if (typeof item.items.then === 'function') {\n                            // probably a promise, process it, when completed it will create the sub menu's.\n                            rootMenuData.manager.operations.processPromises(e, item, rootMenuData, item.items);\n                        } else {\n                            // normal submenu.\n                            rootMenuData.manager.operations.create(e, item, rootMenuData);\n                        }\n                        break;\n\n                    case ContextMenuItemTypes.html:\n                        $(item.html).appendTo($t);\n                        break;\n\n                    default:\n                        [currentMenuData, rootMenuData].forEach((k) => {\n                            k.commands[key] = item;\n                            // Overwrite only if undefined or the item is appended to the rootMenuData. This so it\n                            // doesn't overwrite callbacks of rootMenuData elements if the name is the same.\n                            if (typeof item.callback === 'function' && (typeof k.callbacks[key] === 'undefined' || typeof currentMenuData.type === 'undefined')) {\n                                k.callbacks[key] = item.callback;\n                            }\n                        });\n                        createNameNode(item).appendTo($t);\n                        break;\n                }\n\n                // disable key listener in <input>\n                if (item.type && item.type !== ContextMenuItemTypes.submenu && item.type !== ContextMenuItemTypes.html && item.type !== ContextMenuItemTypes.separator) {\n                    $input\n                        .on('focus', rootMenuData.manager.handler.focusInput)\n                        .on('blur', rootMenuData.manager.handler.blurInput);\n\n                    if (item.events) {\n                        $input.on(item.events, currentMenuData);\n                    }\n                }\n\n                // add icons\n                if (item.icon) {\n                    if (typeof item.icon === 'function') {\n                        item._icon = item.icon.call(this, e, $t, key, item, currentMenuData, rootMenuData);\n                    } else {\n                        if (typeof item.icon === 'string' && item.icon.substring(0, 3) === 'fa-') {\n                            // to enable font awesome\n                            item._icon = rootMenuData.classNames.icon + ' ' + rootMenuData.classNames.icon + '--fa fa ' + item.icon;\n                        } else {\n                            item._icon = rootMenuData.classNames.icon + ' ' + rootMenuData.classNames.icon + '-' + item.icon;\n                        }\n                    }\n                    $t.addClass(item._icon);\n                }\n            }\n\n            // cache contained elements\n            item.$input = $input;\n            item.$label = $label;\n\n            // attach item to menu\n            $t.appendTo(currentMenuData.$menu);\n\n            // Disable text selection\n            if (!currentMenuData.hasTypes && $.support.eventSelectstart) {\n                // browsers support user-select: none,\n                // IE has a special event for text-selection\n                // browsers supporting neither will not be preventing text-selection\n                $t.on('selectstart.disableTextSelect', currentMenuData.manager.handler.abortevent);\n            }\n        });\n        // attach contextMenu to <body> (to bypass any possible overflow:hidden issues on parents of the trigger element)\n        if (!currentMenuData.$node) {\n            currentMenuData.$menu.css('display', 'none').addClass('context-menu-rootMenuData');\n        }\n        currentMenuData.$menu.appendTo(currentMenuData.appendTo || document.body);\n    }\n\n    /**\n     * Resize the menu to its content.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {ContextMenuEvent} e\n     * @param {JQuery} $menu\n     * @param {boolean?} nested\n     */\n    resize(e, $menu, nested) {\n        let domMenu;\n        // determine widths of submenus, as CSS won't grow them automatically\n        // position:absolute within position:absolute; min-width:100; max-width:200; results in width: 100;\n        // kinda sucks hard...\n\n        // determine width of absolutely positioned element\n        $menu.css({position: 'absolute', display: 'block'});\n        // don't apply yet, because that would break nested elements' widths\n        $menu.data('width',\n            (domMenu = $menu.get(0)).getBoundingClientRect\n                ? Math.ceil(domMenu.getBoundingClientRect().width)\n                : $menu.outerWidth() + 1); // outerWidth() returns rounded pixels\n        // reset styles so they allow nested elements to grow/shrink naturally\n        $menu.css({\n            position: 'static',\n            minWidth: '0px',\n            maxWidth: '100000px'\n        });\n        // identify width of nested menus\n        $menu.find('> li > ul').each((index, element) => {\n            e.data.manager.operations.resize(e, $(element), true);\n        });\n        // reset and apply changes in the end because nested\n        // elements' widths wouldn't be calculatable otherwise\n        if (!nested) {\n            $menu.find('ul').addBack().css({\n                position: '',\n                display: '',\n                minWidth: '',\n                maxWidth: ''\n            }).outerWidth(function () {\n                return $(this).data('width');\n            });\n        }\n    }\n\n    /**\n     * Update the contextmenu, re-evaluates the whole menu (including disabled/visible callbacks)\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData?} currentMenuData\n     * @param {ContextMenuData?} rootMenuData\n     *\n     * @return {boolean} hasVisibleItems\n     */\n    update(e, currentMenuData, rootMenuData) {\n        const $trigger = this;\n        if (typeof rootMenuData === 'undefined') {\n            rootMenuData = currentMenuData;\n            rootMenuData.manager.operations.resize(e, currentMenuData.$menu);\n        }\n\n        let hasVisibleItems = false;\n\n        // re-check disabled for each item\n        currentMenuData.$menu.children().each(function (index, element) {\n            let $item = $(element);\n            let key = $item.data('contextMenuKey');\n            let item = currentMenuData.items[key];\n\n            let disabled = (typeof item.disabled === 'function' && item.disabled.call($trigger, e, key, currentMenuData, rootMenuData)) || item.disabled === true;\n            let visible;\n\n            if (typeof item.visible === 'function') {\n                visible = item.visible.call($trigger, e, key, currentMenuData, rootMenuData);\n            } else if (typeof item.visible !== 'undefined') {\n                visible = item.visible === true;\n            } else {\n                visible = true;\n            }\n\n            if (visible) {\n                hasVisibleItems = true;\n            }\n\n            $item[visible ? 'show' : 'hide']();\n\n            // dis- / enable item\n            $item[disabled ? 'addClass' : 'removeClass'](rootMenuData.classNames.disabled);\n\n            if (typeof item.icon === 'function') {\n                $item.removeClass(item._icon);\n                item._icon = item.icon.call($trigger, e, $item, key, item, currentMenuData, rootMenuData);\n                $item.addClass(item._icon);\n            }\n\n            if (item.type) {\n                // dis- / enable input elements\n                $item.find('input, select, textarea').prop('disabled', disabled);\n\n                // update input states\n                switch (item.type) {\n                    case ContextMenuItemTypes.text:\n                    case ContextMenuItemTypes.textarea:\n                        item.$input.val(item.value || '');\n                        break;\n\n                    case ContextMenuItemTypes.checkbox:\n                    case ContextMenuItemTypes.radio:\n                        item.$input.val(item.value || '').prop('checked', !!item.selected);\n                        break;\n\n                    case ContextMenuItemTypes.select:\n                        item.$input.val((item.selected === 0 ? '0' : item.selected) || '');\n                        break;\n                }\n            }\n\n            if (item.$menu) {\n                // update sub-menu\n                let subMenuHasVisibleItems = rootMenuData.manager.operations.update.call($trigger, e, item, rootMenuData);\n                if (subMenuHasVisibleItems) {\n                    hasVisibleItems = true;\n                }\n            }\n        });\n\n        return hasVisibleItems;\n    }\n\n    /**\n     * Create the overlay layer so we can capture the click outside the menu and close it.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData} menuData\n     * @param {number} zIndex\n     * @returns {jQuery}\n     */\n    layer(e, menuData, zIndex) {\n        const $window = $(window);\n\n        // add transparent layer for click area\n        // filter and background for Internet Explorer, Issue #23\n        const $layer = menuData.$layer = $('<div id=\"context-menu-layer\"></div>')\n            .css({\n                height: $window.height(),\n                width: $window.width(),\n                display: 'block',\n                position: 'fixed',\n                'z-index': zIndex,\n                top: 0,\n                left: 0,\n                opacity: 0,\n                filter: 'alpha(opacity=0)',\n                'background-color': '#000'\n            })\n            .data('contextMenuRoot', menuData)\n            .insertBefore(this)\n            .on('contextmenu', menuData.manager.handler.abortevent)\n            .on('mousedown', menuData.manager.handler.layerClick);\n\n        // IE6 doesn't know position:fixed;\n        if (typeof document.body.style.maxWidth === 'undefined') { // IE6 doesn't support maxWidth\n            $layer.css({\n                'position': 'absolute',\n                'height': $(document).height()\n            });\n        }\n\n        return $layer;\n    }\n\n    /**\n     * Process submenu promise.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData} currentMenuData\n     * @param {ContextMenuData} rootMenuData\n     * @param {Promise} promise\n     */\n    processPromises(e, currentMenuData, rootMenuData, promise) {\n        // Start\n        currentMenuData.$node.addClass(rootMenuData.classNames.iconLoadingClass);\n\n        function finishPromiseProcess(currentMenuData, rootMenuData, items) {\n            if (typeof rootMenuData.$menu === 'undefined' || !rootMenuData.$menu.is(':visible')) {\n                return;\n            }\n            currentMenuData.$node.removeClass(rootMenuData.classNames.iconLoadingClass);\n            currentMenuData.items = items;\n            rootMenuData.manager.operations.create(e, currentMenuData, rootMenuData); // Create submenu\n            rootMenuData.manager.operations.update(e, currentMenuData, rootMenuData); // Correctly update position if user is already hovered over menu item\n            rootMenuData.positionSubmenu.call(currentMenuData.$node, e, currentMenuData.$menu); // positionSubmenu, will only do anything if user already hovered over menu item that just got new subitems.\n        }\n\n        function errorPromise(currentMenuData, rootMenuData, errorItem) {\n            // User called promise.reject() with an error item, if not, provide own error item.\n            if (typeof errorItem === 'undefined') {\n                errorItem = {\n                    'error': {\n                        name: 'No items and no error item',\n                        icon: 'context-menu-icon context-menu-icon-quit'\n                    }\n                };\n                if (window.console) {\n                    (console.error || console.log).call(console, 'When you reject a promise, provide an \"items\" object, equal to normal sub-menu items');\n                }\n            } else if (typeof errorItem === 'string') {\n                errorItem = {'error': {name: errorItem}};\n            }\n            finishPromiseProcess(currentMenuData, rootMenuData, errorItem);\n        }\n\n        function completedPromise(currentMenuData, rootMenuData, items) {\n            // Completed promise (dev called promise.resolve). We now have a list of items which can\n            // be used to create the rest of the context menu.\n            if (typeof items === 'undefined') {\n                // Null result, dev should have checked\n                errorPromise(undefined); // own error object\n            }\n            finishPromiseProcess(currentMenuData, rootMenuData, items);\n        }\n\n        // Wait for promise completion. .then(success, error, notify) (we don't track notify). Bind the currentMenuData\n        // and rootMenuData to avoid scope problems\n        promise.then(completedPromise.bind(this, currentMenuData, rootMenuData), errorPromise.bind(this, currentMenuData, rootMenuData));\n    }\n\n    /**\n     * Operation that will run after contextMenu showed on screen.\n     *\n     * @method\n     * @memberOf ContextMenuOperations\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuData} menuData\n     * @return {undefined}\n     */\n    activated(e, menuData) {\n        const $menu = menuData.$menu;\n        const $menuOffset = $menu.offset();\n        const winHeight = $(window).height();\n        const winScrollTop = $(window).scrollTop();\n        const menuHeight = $menu.height();\n        if (menuHeight > winHeight) {\n            $menu.css({\n                'height': winHeight + 'px',\n                'overflow-x': 'hidden',\n                'overflow-y': 'auto',\n                'top': winScrollTop + 'px'\n            });\n        } else if (($menuOffset.top < winScrollTop) || ($menuOffset.top + menuHeight > winScrollTop + winHeight)) {\n            $menu.css({\n                'top': '0px'\n            });\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/classes/ContextMenuOperations.js","/**\n * @class ContextMenuHelper\n * @classdesc Few helper static functions\n */\nexport default class ContextMenuHelper {\n    /**\n     * Calculates zIndex of an element\n     * @memberOf ContextMenuHelper\n     * @method zindex\n     * @static\n     * @param {JQuery} $t - Element to calculate z-index of.\n     * @return {number} - Elements zIndex\n     */\n    static zindex($t) {\n        let zin = 0;\n        let $tt = $t;\n\n        while (true) {\n            zin = Math.max(zin, parseInt($tt.css('z-index'), 10) || 0);\n            $tt = $tt.parent();\n            if (!$tt || !$tt.length || 'html body'.indexOf($tt.prop('nodeName').toLowerCase()) > -1) {\n                break;\n            }\n        }\n        return zin;\n    }\n\n    /**\n     * Split accesskey according to http://www.whatwg.org/specs/web-apps/current-work/multipage/editing.html#assigned-access-key\n     * @memberOf ContextMenuHelper\n     * @method splitAccesskey\n     * @static\n     * @param {string} val - Accesskey value\n     * @return {Array} - Seperate keys to handle as accesskey\n     */\n    static splitAccesskey(val) {\n        let t = val.split(/\\s+/);\n        let keys = [];\n\n        for (let i = 0, k; k = t[i]; i++) {\n            k = k.charAt(0).toUpperCase(); // first character only\n            // theoretically non-accessible characters should be ignored, but different systems, different keyboard layouts, ... screw it.\n            // a map to look up already used access keys would be nice\n            keys.push(k);\n        }\n\n        return keys;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/classes/ContextMenuHelper.js","/**\n * Determine the position for a root menu.\n * @memberOf ContextMenuOptions\n * @function ContextMenuOptions#determinePosition\n * @param {(JQuery)} $menu\n */\nexport function determinePosition($menu) {\n    // position to the lower middle of the trigger element\n    if ($.ui && $.ui.position) {\n        // .position() is provided as a jQuery UI utility\n        // (...and it won't work on hidden elements)\n        $menu.css('display', 'block').position({\n            my: 'center top',\n            at: 'center bottom',\n            of: this,\n            offset: '0 5',\n            collision: 'fit'\n        }).css('display', 'none');\n    } else {\n        // determine contextMenu position\n        const offset = this.offset();\n        offset.top += this.outerHeight();\n        offset.left += this.outerWidth() / 2 - $menu.outerWidth() / 2;\n        $menu.css(offset);\n    }\n}\n\n/**\n * Position the root menu.\n * @memberOf ContextMenuOptions\n * @function ContextMenuOptions#position\n * @param {JQuery.Event} e\n * @param {ContextMenuData} currentMenuData\n * @param {(number|string)} x\n * @param {(number|string)} y\n */\nexport function position(e, currentMenuData, x, y) {\n    const $window = $(window);\n    let offset;\n    // determine contextMenu position\n    if (!x && !y) {\n        currentMenuData.determinePosition.call(this, currentMenuData.$menu);\n        return;\n    } else if (x === 'maintain' && y === 'maintain') {\n        // x and y must not be changed (after re-show on command click)\n        offset = currentMenuData.$menu.position();\n    } else {\n        // x and y are given (by mouse event)\n        const offsetParentOffset = currentMenuData.$menu.offsetParent().offset();\n        offset = {top: y - offsetParentOffset.top, left: x - offsetParentOffset.left};\n    }\n\n    // correct offset if viewport demands it\n    const bottom = $window.scrollTop() + $window.height();\n    const right = $window.scrollLeft() + $window.width();\n    const height = currentMenuData.$menu.outerHeight();\n    const width = currentMenuData.$menu.outerWidth();\n\n    if (offset.top + height > bottom) {\n        offset.top -= height;\n    }\n\n    if (offset.top < 0) {\n        offset.top = 0;\n    }\n\n    if (offset.left + width > right) {\n        offset.left -= width;\n    }\n\n    if (offset.left < 0) {\n        offset.left = 0;\n    }\n\n    currentMenuData.$menu.css(offset);\n}\n\n/**\n * Position a submenu.\n * @memberOf ContextMenuOptions\n * @function ContextMenuOptions#positionSubmenu\n * @param {JQuery.Event} e\n * @param {JQuery} $menu\n */\n// position the sub-menu\nexport function positionSubmenu(e, $menu) {\n    if (typeof $menu === 'undefined') {\n        // When user hovers over item (which has sub items) handle.focusItem will call this.\n        // but the submenu does not exist yet if ContextMenuData.items is a promise. just return, will\n        // call positionSubmenu after promise is completed.\n        return;\n    }\n    if ($.ui && $.ui.position) {\n        // .position() is provided as a jQuery UI utility\n        // (...and it won't work on hidden elements)\n        $menu.css('display', 'block').position({\n            my: 'left top-5',\n            at: 'right top',\n            of: this,\n            collision: 'flipfit fit'\n        }).css('display', '');\n    } else {\n        // determine contextMenu position\n        const offset = {\n            top: -9,\n            left: this.outerWidth() - 5\n        };\n        $menu.css(offset);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/defaults/position.js","/**\n * @class ContextMenuHtml5Builder\n * @classdesc considering the following HTML `$.contextMenu.fromMenu($('#html5menu'))` will return a proper items object.\n\n ```\n <menu id=\"html5menu\" type=\"context\" style=\"display:none\">\n    <command label=\"rotate\" onclick=\"alert('rotate')\">\n    <command label=\"resize\" onclick=\"alert('resize')\">\n    <menu label=\"share\">\n        <command label=\"twitter\" onclick=\"alert('twitter')\">\n        <hr>\n        <command label=\"facebook\" onclick=\"alert('facebook')\">\n    </menu>\n </menu>\n ```\n\n `$.contextMenu.fromMenu()` will properly import (and thus handle) the following elements. Everything else is imported as `{type: \"html\"}`\n\n ```\n <menu>\n <hr>\n <a>\n <command type=\"command|radio|checkbox\"> (W3C Specification)\n <menuitem type=\"command|radio|checkbox\"> (Firefox)\n <input type=\"text|radio|checkbox\">\n <select>\n <textarea>\n <label for=\"someId\">\n <label> the text <input|textarea|select>\n ```\n\n The `<menu>` must be hidden but not removed, as all command events (clicks) are passed-thru to the original command element!\n\n Note: While the specs note `<option>`s to be renderd as regular commands, `$.contextMenu` will render an actual `<select>`.\n\n ## HTML5 `<menu>` shiv/polyfill\n\n Engaging the HTML5 polyfill (ignoring `$.contextMenu` if context menus are available natively):\n\n ```\n $(function(){\n    $.contextMenu(\"html5\");\n });\n ```\n\n Engaging the HTML5 polyfill (ignoring browser native implementation):\n\n ```\n $(function(){\n    $.contextMenu(\"html5\", true);\n });\n ```\n\n */\nexport default class ContextMenuHtml5Builder {\n    /**\n     * Get the input label for the given node.\n     *\n     * @method inputLabel\n     * @memberOf ContextMenuHtml5Builder\n     * @instance\n     *\n     * @param {HTMLElement} node - Html element\n     * @returns {string|JQuery|jQuery} - Input label element\n     */\n    inputLabel(node) {\n        return (node.id && $('label[for=\"' + node.id + '\"]').val()) || node.name;\n    }\n\n    /**\n     * Helper function to build ContextMenuItems from an html5 menu element.\n     *\n     * @method fromMenu\n     * @memberOf ContextMenuHtml5Builder\n     * @instance\n     *\n     * @param {JQuery|string} element - Menu element or selector to generate the menu from.\n     * @returns {Object.<string, ContextMenuItem>} - Collection of {@link ContextMenuItem}\n     */\n    fromMenu(element) {\n        const $this = $(element);\n        const items = {};\n\n        this.build(items, $this.children());\n\n        return items;\n    }\n\n    /**\n     * Helper function for building a menu from a HTML menu element.\n     *\n     * @method build\n     * @memberOf ContextMenuHtml5Builder\n     * @instance\n     *\n     * @param {Object.<string, ContextMenuItem>} items - {@link ContextMenuItem} object to build.\n     * @param {(JQuery)} $children - Collection of elements inside the `<menu>` element\n     * @param {number?} counter - Counter to generate {@link ContextMenuItem} key names.\n     * @returns {number} - Counter to generate {@link ContextMenuItem} key names.\n     */\n    build(items, $children, counter) {\n        if (!counter) {\n            counter = 0;\n        }\n\n        let builder = this;\n\n        $children.each(function () {\n            let $node = $(this);\n            let node = this;\n            let nodeName = this.nodeName.toLowerCase();\n            let label;\n            let item;\n\n            // extract <label><input>\n            if (nodeName === 'label' && $node.find('input, textarea, select').length) {\n                label = $node.text();\n                $node = $node.children().first();\n                node = $node.get(0);\n                nodeName = node.nodeName.toLowerCase();\n            }\n\n            /*\n             * <menu> accepts flow-content as children. that means <embed>, <canvas> and such are valid menu items.\n             * Not being the sadistic kind, $.contextMenu only accepts:\n             * <command>, <menuitem>, <hr>, <span>, <p> <input [text, radio, checkbox]>, <textarea>, <select> and of course <menu>.\n             * Everything else will be imported as an html node, which is not interfaced with contextMenu.\n             */\n\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#concept-command\n            switch (nodeName) {\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#the-menu-element\n                case 'menu':\n                    item = {name: $node.attr('label'), items: {}};\n                    counter = builder.build(item.items, $node.children(), counter);\n                    break;\n\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-a-element-to-define-a-command\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-button-element-to-define-a-command\n                case 'a':\n                case 'button':\n                    item = {\n                        name: $node.text(),\n                        disabled: !!$node.attr('disabled'),\n                        callback: (function () {\n                            return function () {\n                                $node.get(0).click();\n                            };\n                        })()\n                    };\n                    break;\n\n                // http://www.whatwg.org/specs/web-apps/current-work/multipage/commands.html#using-the-command-element-to-define-a-command\n                case 'menuitem':\n                case 'command':\n                    switch ($node.attr('type')) {\n                        case undefined:\n                        case 'command':\n                        case 'menuitem':\n                            item = {\n                                name: $node.attr('label'),\n                                disabled: !!$node.attr('disabled'),\n                                icon: $node.attr('icon'),\n                                callback: (function () {\n                                    return function () {\n                                        $node.get(0).click();\n                                    };\n                                })()\n                            };\n                            break;\n\n                        case 'checkbox':\n                            item = {\n                                type: 'checkbox',\n                                disabled: !!$node.attr('disabled'),\n                                name: $node.attr('label'),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n                        case 'radio':\n                            item = {\n                                type: 'radio',\n                                disabled: !!$node.attr('disabled'),\n                                name: $node.attr('label'),\n                                radio: $node.attr('radiogroup'),\n                                value: $node.attr('id'),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n\n                        default:\n                            item = undefined;\n                    }\n                    break;\n\n                case 'hr':\n                    item = '-------';\n                    break;\n\n                case 'input':\n                    switch ($node.attr('type')) {\n                        case 'text':\n                            item = {\n                                type: 'text',\n                                name: label || builder.inputLabel(node),\n                                disabled: !!$node.attr('disabled'),\n                                value: $node.val()\n                            };\n                            break;\n\n                        case 'checkbox':\n                            item = {\n                                type: 'checkbox',\n                                name: label || builder.inputLabel(node),\n                                disabled: !!$node.attr('disabled'),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n\n                        case 'radio':\n                            item = {\n                                type: 'radio',\n                                name: label || builder.inputLabel(node),\n                                disabled: !!$node.attr('disabled'),\n                                radio: !!$node.attr('name'),\n                                value: $node.val(),\n                                selected: !!$node.attr('checked')\n                            };\n                            break;\n\n                        default:\n                            item = undefined;\n                            break;\n                    }\n                    break;\n\n                case 'select':\n                    item = {\n                        type: 'select',\n                        name: label || builder.inputLabel(node),\n                        disabled: !!$node.attr('disabled'),\n                        selected: $node.val(),\n                        options: {}\n                    };\n                    $node.children().each(function () {\n                        item.options[this.value] = $(this).text();\n                    });\n                    break;\n\n                case 'textarea':\n                    item = {\n                        type: 'textarea',\n                        name: label || builder.inputLabel(node),\n                        disabled: !!$node.attr('disabled'),\n                        value: $node.val()\n                    };\n                    break;\n\n                case 'label':\n                    break;\n\n                default:\n                    item = {type: 'html', html: $node.clone(true)};\n                    break;\n            }\n\n            if (item) {\n                counter++;\n                items['key' + counter] = item;\n            }\n        });\n\n        return counter;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/classes/ContextMenuHtml5Builder.js","import defaults from '../defaults';\n\nexport default class ContextMenuEventHandler {\n    /**\n     * @constructs ContextMenuEventHandler\n     * @constructor\n     * @property {?JQuery} $currentTrigger\n     * @property {Object} hoveract\n     */\n    constructor() {\n        this.$currentTrigger = null;\n        this.hoveract = {};\n    }\n\n    /**\n     * Helper to abort an event\n     *\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    abortevent(e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    contextmenu(e) {\n        const $this = $(e.currentTarget);\n\n        if (!e.data) {\n            throw new Error('No data attached');\n        }\n\n        // disable actual context-menu if we are using the right mouse button as the trigger\n        if (e.data.trigger === 'right') {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n\n        // abort native-triggered events unless we're triggering on right click\n        if ((e.data.trigger !== 'right' && e.data.trigger !== 'demand') && e.originalEvent) {\n            return;\n        }\n\n        // Let the current contextmenu decide if it should show or not based on its own trigger settings\n        if (typeof e.mouseButton !== 'undefined') {\n            if (!(e.data.trigger === 'left' && e.mouseButton === 0) && !(e.data.trigger === 'right' && e.mouseButton === 2)) {\n                // Mouse click is not valid.\n                return;\n            }\n        }\n\n        // abort event if menu is visible for this trigger\n        if ($this.hasClass('context-menu-active')) {\n            return;\n        }\n\n        if (!$this.hasClass('context-menu-disabled')) {\n            // theoretically need to fire a show event at <menu>\n            // http://www.whatwg.org/specs/web-apps/current-work/multipage/interactive-elements.html#context-menus\n            // var evt = jQuery.Event(\"show\", { data: data, pageX: e.pageX, pageY: e.pageY, relatedTarget: this });\n            // e.data.$menu.trigger(evt);\n\n            e.data.manager.handler.$currentTrigger = $this;\n            if (e.data.build) {\n                const built = e.data.build(e, $this);\n                // abort if build() returned false\n                if (built === false) {\n                    return;\n                }\n\n                // dynamically build menu on invocation\n                e.data = $.extend(true, {}, defaults, e.data, built || {});\n\n                // abort if there are no items to display\n                if (!e.data.items || $.isEmptyObject(e.data.items)) {\n                    // Note: jQuery captures and ignores errors from event handlers\n                    if (window.console) {\n                        (console.error || console.log).call(console, 'No items specified to show in contextMenu');\n                    }\n\n                    throw new Error('No Items specified');\n                }\n\n                // backreference for custom command type creation\n                e.data.$trigger = e.data.manager.handler.$currentTrigger;\n\n                e.data.manager.operations.create(e, e.data);\n            }\n            // show menu\n            e.data.manager.operations.show.call($this, e, e.data, e.pageX, e.pageY);\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    click(e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        $(this).trigger($.Event('contextmenu', {data: e.data, pageX: e.pageX, pageY: e.pageY, originalEvent: e}));\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    mousedown(e) {\n        // register mouse down\n        const $this = $(this);\n\n        // hide any previous menus\n        if (e.data.manager.handler.$currentTrigger && e.data.manager.handler.$currentTrigger.length && !e.data.manager.handler.$currentTrigger.is($this)) {\n            e.data.manager.handler.$currentTrigger.data('contextMenu').$menu.trigger($.Event('contextmenu', {\n                data: e.data,\n                originalEvent: e\n            }));\n        }\n\n        // activate on right click\n        if (e.button === 2) {\n            e.data.manager.handler.$currentTrigger = $this.data('contextMenuActive', true);\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    mouseup(e) {\n        // show menu\n        const $this = $(this);\n        if ($this.data('contextMenuActive') && e.data.manager.handler.$currentTrigger && e.data.manager.handler.$currentTrigger.length && e.data.manager.handler.$currentTrigger.is($this) && !$this.hasClass('context-menu-disabled')) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            e.data.manager.handler.$currentTrigger = $this;\n            $this.trigger($.Event('contextmenu', {data: e.data, pageX: e.pageX, pageY: e.pageY, originalEvent: e}));\n        }\n\n        $this.removeData('contextMenuActive');\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    mouseenter(e) {\n        const $this = $(this);\n        const $related = $(e.relatedTarget);\n        const $document = $(document);\n\n        // abort if we're coming from a menu\n        if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n            return;\n        }\n\n        // abort if a menu is shown\n        if (e.data.manager.handler.$currentTrigger && e.data.manager.handler.$currentTrigger.length) {\n            return;\n        }\n\n        e.data.manager.handler.hoveract.pageX = e.pageX;\n        e.data.manager.handler.hoveract.pageY = e.pageY;\n        e.data.manager.handler.hoveract.data = e.data;\n        $document.on('mousemove.contextMenuShow', e.data.manager.handler.mousemove);\n        e.data.manager.handler.hoveract.timer = setTimeout(() => {\n            e.data.manager.handler.hoveract.timer = null;\n            $document.off('mousemove.contextMenuShow');\n            e.data.manager.handler.$currentTrigger = $this;\n            $this.trigger($.Event('contextmenu', {\n                data: e.data.manager.handler.hoveract.data,\n                pageX: e.data.manager.handler.hoveract.pageX,\n                pageY: e.data.manager.handler.hoveract.pageY\n            }));\n        }, e.data.delay);\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    mousemove(e) {\n        e.data.manager.handler.hoveract.pageX = e.pageX;\n        e.data.manager.handler.hoveract.pageY = e.pageY;\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    mouseleave(e) {\n        // abort if we're leaving for a menu\n        const $related = $(e.relatedTarget);\n        if ($related.is('.context-menu-list') || $related.closest('.context-menu-list').length) {\n            return;\n        }\n\n        try {\n            clearTimeout(e.data.manager.handler.hoveract.timer);\n        } catch (e) {\n\n        }\n\n        e.data.manager.handler.hoveract.timer = null;\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    layerClick(e) {\n        let $this = $(this);\n        /** @var ContextMenuData **/\n        let root = $this.data('contextMenuRoot');\n\n        if (root === null || typeof root === 'undefined') {\n            throw new Error('No ContextMenuData found');\n        }\n\n        let button = e.button;\n        let x = e.pageX;\n        let y = e.pageY;\n        let fakeClick = x === undefined;\n        let target;\n        let offset;\n\n        e.preventDefault();\n\n        setTimeout(() => {\n            if (fakeClick) {\n                if (root.$menu !== null && typeof root.$menu !== 'undefined') {\n                    root.$menu.trigger('contextmenu:hide', {data: root, originalEvent: e});\n                }\n                return;\n            }\n\n            let $window = $(window);\n            let triggerAction = ((root.trigger === 'left' && button === 0) || (root.trigger === 'right' && button === 2));\n\n            // find the element that would've been clicked, wasn't the layer in the way\n            if (document.elementFromPoint && root.$layer) {\n                root.$layer.hide();\n                target = document.elementFromPoint(x - $window.scrollLeft(), y - $window.scrollTop());\n\n                // also need to try and focus this element if we're in a contenteditable area,\n                // as the layer will prevent the browser mouse action we want\n                if (target.isContentEditable) {\n                    const range = document.createRange();\n                    const sel = window.getSelection();\n                    range.selectNode(target);\n                    range.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(range);\n                }\n                $(target).trigger(e);\n                root.$layer.show();\n            }\n\n            if (root.hideOnSecondTrigger && triggerAction && root.$menu !== null && typeof root.$menu !== 'undefined') {\n                root.$menu.trigger('contextmenu:hide', {data: root, originalEvent: e});\n                return;\n            }\n\n            if (root.reposition && triggerAction) {\n                if (document.elementFromPoint) {\n                    if (root.$trigger.is(target)) {\n                        root.position.call(root.$trigger, e, root, x, y);\n                        return;\n                    }\n                } else {\n                    offset = root.$trigger.offset();\n                    const $window = $(window);\n                    // while this looks kinda awful, it's the best way to avoid\n                    // unnecessarily calculating any positions\n                    offset.top += $window.scrollTop();\n                    if (offset.top <= e.pageY) {\n                        offset.left += $window.scrollLeft();\n                        if (offset.left <= e.pageX) {\n                            offset.bottom = offset.top + root.$trigger.outerHeight();\n                            if (offset.bottom >= e.pageY) {\n                                offset.right = offset.left + root.$trigger.outerWidth();\n                                if (offset.right >= e.pageX) {\n                                    // reposition\n                                    root.position.call(root.$trigger, e, root, x, y);\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (target && triggerAction) {\n                root.$trigger.one('contextmenu:hidden', () => {\n                    $(target).contextMenu({x: x, y: y, button: button, originalEvent: e});\n                });\n            }\n\n            if (root.$menu !== null && typeof root.$menu !== 'undefined') {\n                root.$menu.trigger('contextmenu:hide', {data: root, originalEvent: e});\n            }\n        }, 50);\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {ContextMenuItem} currentMenuData\n     */\n    keyStop(e, currentMenuData) {\n        if (!currentMenuData.isInput) {\n            e.preventDefault();\n        }\n\n        e.stopPropagation();\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    key(e) {\n        let rootMenuData = {};\n\n        // Only get the data from this.$currentTrigger if it exists\n        if (e.data.manager.handler.$currentTrigger) {\n            rootMenuData = e.data.manager.handler.$currentTrigger.data('contextMenu') || {};\n        }\n        // If the trigger happen on a element that are above the contextmenu do this\n        if (typeof rootMenuData.zIndex === 'undefined') {\n            rootMenuData.zIndex = 0;\n        }\n        const getZIndexOfTriggerTarget = (target) => {\n            if (target.style.zIndex !== '') {\n                return target.style.zIndex;\n            } else {\n                if (target.offsetParent !== null && typeof target.offsetParent !== 'undefined') {\n                    return getZIndexOfTriggerTarget(target.offsetParent);\n                } else if (target.parentElement !== null && typeof target.parentElement !== 'undefined') {\n                    return getZIndexOfTriggerTarget(target.parentElement);\n                }\n            }\n        };\n        let targetZIndex = getZIndexOfTriggerTarget(e.target);\n\n        // If targetZIndex is heigher then rootMenuData.zIndex dont progress any futher.\n        // This is used to make sure that if you are using a dialog with a input / textarea / contenteditable div\n        // and its above the contextmenu it wont steal keys events\n        if (rootMenuData.$menu && parseInt(targetZIndex, 10) > parseInt(rootMenuData.$menu.css('zIndex'), 10)) {\n            return;\n        }\n        switch (e.keyCode) {\n            case 9:\n            case 38: // up\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                // if keyCode is [38 (up)] or [9 (tab) with shift]\n                if (rootMenuData.isInput) {\n                    if (e.keyCode === 9 && e.shiftKey) {\n                        e.preventDefault();\n                        if (rootMenuData.$selected) {\n                            rootMenuData.$selected.find('input, textarea, select').blur();\n                        }\n                        if (rootMenuData.$menu !== null && typeof rootMenuData.$menu !== 'undefined') {\n                            rootMenuData.$menu.trigger('prevcommand', {data: rootMenuData, originalEvent: e});\n                        }\n                        return;\n                    } else if (e.keyCode === 38 && rootMenuData.$selected.find('input, textarea, select').prop('type') === 'checkbox') {\n                        // checkboxes don't capture this key\n                        e.preventDefault();\n                        return;\n                    }\n                } else if (e.keyCode !== 9 || e.shiftKey) {\n                    if (rootMenuData.$menu !== null && typeof rootMenuData.$menu !== 'undefined') {\n                        rootMenuData.$menu.trigger('prevcommand', {data: rootMenuData, originalEvent: e});\n                    }\n                    return;\n                }\n                break;\n            // omitting break;\n            // case 9: // tab - reached through omitted break;\n            case 40: // down\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                if (rootMenuData.isInput) {\n                    if (e.keyCode === 9) {\n                        e.preventDefault();\n                        if (rootMenuData.$selected) {\n                            rootMenuData.$selected.find('input, textarea, select').blur();\n                        }\n                        if (rootMenuData.$menu !== null && typeof rootMenuData.$menu !== 'undefined') {\n                            rootMenuData.$menu.trigger('nextcommand', {data: rootMenuData, originalEvent: e});\n                        }\n                        return;\n                    } else if (e.keyCode === 40 && rootMenuData.$selected.find('input, textarea, select').prop('type') === 'checkbox') {\n                        // checkboxes don't capture this key\n                        e.preventDefault();\n                        return;\n                    }\n                } else {\n                    if (rootMenuData.$menu !== null && typeof rootMenuData.$menu !== 'undefined') {\n                        rootMenuData.$menu.trigger('nextcommand', {data: rootMenuData, originalEvent: e});\n                    }\n                    return;\n                }\n                break;\n\n            case 37: // left\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                if (rootMenuData.isInput || !rootMenuData.$selected || !rootMenuData.$selected.length) {\n                    break;\n                }\n\n                if (!rootMenuData.$selected.parent().hasClass('context-menu-root')) {\n                    const $parent = rootMenuData.$selected.parent().parent();\n                    rootMenuData.$selected.trigger('contextmenu:blur', {data: rootMenuData, originalEvent: e});\n                    rootMenuData.$selected = $parent;\n                    return;\n                }\n                break;\n\n            case 39: // right\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                if (rootMenuData.isInput || !rootMenuData.$selected || !rootMenuData.$selected.length) {\n                    break;\n                }\n\n                const itemdata = rootMenuData.$selected.data('contextMenu') || {};\n                if (itemdata.$menu && rootMenuData.$selected.hasClass('context-menu-submenu')) {\n                    rootMenuData.$selected = null;\n                    itemdata.$selected = null;\n                    itemdata.$menu.trigger('nextcommand', {data: itemdata, originalEvent: e});\n                    return;\n                }\n                break;\n\n            case 35: // end\n            case 36: // home\n                if (rootMenuData.$selected && rootMenuData.$selected.find('input, textarea, select').length) {\n                    break;\n                } else {\n                    ((rootMenuData.$selected && rootMenuData.$selected.parent()) || rootMenuData.$menu)\n                        .children(':not(.' + rootMenuData.classNames.disabled + ', .' + rootMenuData.classNames.notSelectable + ')')[e.keyCode === 36 ? 'first' : 'last']()\n                        .trigger('contextmenu:focus', {data: rootMenuData, originalEvent: e});\n                    e.preventDefault();\n                    break;\n                }\n            case 13: // enter\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                if (rootMenuData.isInput) {\n                    if (rootMenuData.$selected && !rootMenuData.$selected.is('textarea, select')) {\n                        e.preventDefault();\n                        return;\n                    }\n                    break;\n                }\n                if (typeof rootMenuData.$selected !== 'undefined' && rootMenuData.$selected !== null) {\n                    rootMenuData.$selected.trigger('mouseup', {data: rootMenuData, originalEvent: e});\n                }\n                return;\n            case 32: // space\n            case 33: // page up\n            case 34: // page down\n                // prevent browser from scrolling down while menu is visible\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                return;\n\n            case 27: // esc\n                e.data.manager.handler.keyStop(e, rootMenuData);\n                if (rootMenuData.$menu !== null && typeof rootMenuData.$menu !== 'undefined') {\n                    rootMenuData.$menu.trigger('contextmenu:hide', {data: rootMenuData, originalEvent: e});\n                }\n                return;\n\n            default: // 0-9, a-z\n                const k = (String.fromCharCode(e.keyCode)).toUpperCase();\n                if (rootMenuData.accesskeys && rootMenuData.accesskeys[k]) {\n                    // according to the specs accesskeys must be invoked immediately\n                    rootMenuData.accesskeys[k].$node.trigger(rootMenuData.accesskeys[k].$menu ? 'contextmenu:focus' : 'mouseup', {\n                        data: rootMenuData,\n                        originalEvent: e\n                    });\n                    return;\n                }\n                break;\n        }\n        // pass event to selected item,\n        // stop propagation to avoid endless recursion\n        e.stopPropagation();\n        if (typeof rootMenuData.$selected !== 'undefined' && rootMenuData.$selected !== null) {\n            rootMenuData.$selected.trigger(e);\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    prevItem(e) {\n        e.stopPropagation();\n        let currentMenuData = $(this).data('contextMenu') || {};\n        const rootMenuData = $(this).data('contextMenuRoot') || {};\n\n        // obtain currently selected menu\n        if (currentMenuData.$selected) {\n            const $s = currentMenuData.$selected;\n            currentMenuData = currentMenuData.$selected.parent().data('contextMenu') || {};\n            currentMenuData.$selected = $s;\n        }\n\n        const $children = currentMenuData.$menu.children();\n        let $prev = !currentMenuData.$selected || !currentMenuData.$selected.prev().length ? $children.last() : currentMenuData.$selected.prev();\n        const $round = $prev;\n\n        // skip disabled or hidden elements\n        while ($prev.hasClass(rootMenuData.classNames.disabled) || $prev.hasClass(rootMenuData.classNames.notSelectable) || $prev.is(':hidden')) {\n            if ($prev.prev().length) {\n                $prev = $prev.prev();\n            } else {\n                $prev = $children.last();\n            }\n\n            if ($prev.is($round)) {\n                // break endless loop\n                return;\n            }\n        }\n\n        // leave current\n        if (currentMenuData.$selected) {\n            rootMenuData.manager.handler.itemMouseleave.call(currentMenuData.$selected.get(0), e);\n        }\n\n        // activate next\n        rootMenuData.manager.handler.itemMouseenter.call($prev.get(0), e);\n\n        // focus input\n        const $input = $prev.find('input, textarea, select');\n        if ($input.length) {\n            $input.focus();\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    nextItem(e) {\n        e.stopPropagation();\n        let currentMenuData = $(this).data('contextMenu') || {};\n        let rootMenuData = $(this).data('contextMenuRoot') || {};\n\n        // obtain currently selected menu\n        if (currentMenuData.$selected) {\n            const $s = currentMenuData.$selected;\n            currentMenuData = currentMenuData.$selected.parent().data('contextMenu') || {};\n            currentMenuData.$selected = $s;\n        }\n\n        const $children = currentMenuData.$menu.children();\n        let $next = !currentMenuData.$selected || !currentMenuData.$selected.next().length ? $children.first() : currentMenuData.$selected.next();\n        const $round = $next;\n\n        // skip disabled\n        while ($next.hasClass(rootMenuData.classNames.disabled) || $next.hasClass(rootMenuData.classNames.notSelectable) || $next.is(':hidden')) {\n            if ($next.next().length) {\n                $next = $next.next();\n            } else {\n                $next = $children.first();\n            }\n            if ($next.is($round)) {\n                // break endless loop\n                return;\n            }\n        }\n\n        // leave current\n        if (currentMenuData.$selected) {\n            rootMenuData.manager.handler.itemMouseleave.call(currentMenuData.$selected.get(0), e);\n        }\n\n        // activate next\n        rootMenuData.manager.handler.itemMouseenter.call($next.get(0), e);\n\n        // focus input\n        const $input = $next.find('input, textarea, select');\n        if ($input.length) {\n            $input.focus();\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    focusInput(e) {\n        let $this = $(this).closest('.context-menu-item');\n        let data = $this.data();\n        let currentMenuData = data.contextMenu;\n        let rootMenuData = data.contextMenuRoot;\n\n        rootMenuData.$selected = currentMenuData.$selected = $this;\n        rootMenuData.isInput = currentMenuData.isInput = true;\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    blurInput(e) {\n        let $this = $(this).closest('.context-menu-item');\n        let data = $this.data();\n        let currentMenuData = data.contextMenu;\n        let rootMenuData = data.contextMenuRoot;\n\n        rootMenuData.isInput = currentMenuData.isInput = false;\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    menuMouseenter(e) {\n        let root = $(this).data().contextMenuRoot;\n        root.hovering = true;\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    menuMouseleave(e) {\n        let root = $(this).data().contextMenuRoot;\n        if (root.$layer && root.$layer.is(e.relatedTarget)) {\n            root.hovering = false;\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    itemMouseenter(e) {\n        let $this = $(this);\n        let data = $this.data();\n        let currentMenuData = data.contextMenu;\n        let rootMenuData = data.contextMenuRoot;\n\n        rootMenuData.hovering = true;\n\n        // abort if we're re-entering\n        if (e && rootMenuData.$layer && rootMenuData.$layer.is(e.relatedTarget)) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n\n        // make sure only one item is selected\n        let targetMenu = (currentMenuData.$menu ? currentMenuData : rootMenuData);\n        targetMenu.$menu\n            .children('.' + rootMenuData.classNames.hover).trigger('contextmenu:blur', {\n                data: targetMenu,\n                originalEvent: e\n            })\n            .children('.hover').trigger('contextmenu:blur', {data: targetMenu, originalEvent: e});\n\n        if ($this.hasClass(rootMenuData.classNames.disabled) || $this.hasClass(rootMenuData.classNames.notSelectable)) {\n            currentMenuData.$selected = null;\n            return;\n        }\n\n        $this.trigger('contextmenu:focus', {data: currentMenuData, originalEvent: e});\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    itemMouseleave(e) {\n        let $this = $(this);\n        let data = $this.data();\n        let currentMenuData = data.contextMenu;\n        let rootMenuData = data.contextMenuRoot;\n\n        if (rootMenuData !== currentMenuData && rootMenuData.$layer && rootMenuData.$layer.is(e.relatedTarget)) {\n            if (typeof rootMenuData.$selected !== 'undefined' && rootMenuData.$selected !== null) {\n                rootMenuData.$selected.trigger('contextmenu:blur', {data: rootMenuData, originalEvent: e});\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            rootMenuData.$selected = currentMenuData.$selected = currentMenuData.$node;\n            return;\n        }\n\n        if (currentMenuData && currentMenuData.$menu && currentMenuData.$menu.hasClass(rootMenuData.classNames.visible)) {\n            return;\n        }\n\n        $this.trigger('contextmenu:blur');\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    itemClick(e) {\n        let $this = $(this);\n        let data = $this.data();\n        let currentMenuData = data.contextMenu;\n        let rootMenuData = data.contextMenuRoot;\n        let key = data.contextMenuKey;\n        let callback;\n\n        // abort if the key is unknown or disabled or is a menu\n        if (!currentMenuData.items[key] || $this.is('.' + rootMenuData.classNames.disabled + ', .context-menu-separator, .' + rootMenuData.classNames.notSelectable) || ($this.is('.context-menu-submenu') && rootMenuData.selectableSubMenu === false)) {\n            return;\n        }\n\n        e.preventDefault();\n        e.stopImmediatePropagation();\n\n        if (typeof currentMenuData.callbacks[key] === 'function' && Object.prototype.hasOwnProperty.call(currentMenuData.callbacks, key)) {\n            // item-specific callback\n            callback = currentMenuData.callbacks[key];\n        } else if (typeof rootMenuData.callback === 'function') {\n            // default callback\n            callback = rootMenuData.callback;\n        } else {\n            // no callback, no action\n            return;\n        }\n\n        // hide menu if callback doesn't stop that\n        if (callback.call(rootMenuData.$trigger, e, key, currentMenuData, rootMenuData) !== false) {\n            rootMenuData.$menu.trigger('contextmenu:hide');\n        } else if (rootMenuData.$menu.parent().length) {\n            rootMenuData.manager.operations.update.call(rootMenuData.$trigger, e, rootMenuData);\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    inputClick(e) {\n        e.stopImmediatePropagation();\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     * @param {Object} data\n     */\n    hideMenu(e, data) {\n        const root = $(this).data('contextMenuRoot');\n        root.manager.operations.hide.call(root.$trigger, e, root, data && data.force);\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    focusItem(e) {\n        e.stopPropagation();\n        const $this = $(this);\n        const data = $this.data();\n        const currentMenuData = data.contextMenu;\n        const rootMenuData = data.contextMenuRoot;\n\n        if ($this.hasClass(rootMenuData.classNames.disabled) || $this.hasClass(rootMenuData.classNames.notSelectable)) {\n            return;\n        }\n\n        $this\n            .addClass([rootMenuData.classNames.hover, rootMenuData.classNames.visible].join(' '))\n            // select other items and included items\n            .parent().find('.context-menu-item').not($this)\n            .removeClass(rootMenuData.classNames.visible)\n            .filter('.' + rootMenuData.classNames.hover)\n            .trigger('contextmenu:blur');\n\n        // remember selected\n        currentMenuData.$selected = rootMenuData.$selected = $this;\n\n        if (currentMenuData.$node && currentMenuData.$node.hasClass('context-menu-submenu')) {\n            currentMenuData.$node.addClass(rootMenuData.classNames.hover);\n        }\n\n        // position sub-menu - do after show so dumb $.ui.position can keep up\n        if (currentMenuData.$node) {\n            rootMenuData.positionSubmenu.call(currentMenuData.$node, e, currentMenuData.$menu);\n        }\n    }\n\n    /**\n     * @method\n     * @memberOf ContextMenuEventHandler\n     * @instance\n     *\n     * @param {JQuery.Event} e\n     */\n    blurItem(e) {\n        e.stopPropagation();\n        const $this = $(this);\n        const data = $this.data();\n        const currentMenuData = data.contextMenu;\n        const rootMenuData = data.contextMenuRoot;\n\n        if (rootMenuData.autoHide) { // for tablets and touch screens this needs to remain\n            $this.removeClass(rootMenuData.classNames.visible);\n        }\n        $this.removeClass(rootMenuData.classNames.hover);\n        currentMenuData.$selected = null;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/classes/ContextMenuEventHandler.js","/**\n * The jQuery plugin namespace.\n * @external \"jQuery.fn\"\n * @see {@link http://docs.jquery.com/Plugins/Authoring The jQuery Plugin Guide}\n */\n\n/**\n * Function that is called when calling contextmenu on an element (eg. $('.contextmenu').contextMenu()).\n *\n * @instance\n * @function external:jQuery.fn.contextmenu\n *\n * @param {(string|Object)} operation\n * @returns {JQuery}\n */\nexport default function (operation) {\n    const $t = this;\n    const $o = operation;\n    if ($t.length > 0) { // this is not a build on demand menu\n        if (typeof operation === 'undefined') {\n            $t.first().trigger('contextmenu');\n        } else if (typeof operation.x !== 'undefined' && typeof operation.y !== 'undefined') {\n            $t.first().trigger($.Event('contextmenu', {\n                pageX: operation.x,\n                pageY: operation.y,\n                mouseButton: operation.button\n            }));\n        } else if (operation === 'hide') {\n            const $menu = this.first().data('contextMenu') ? this.first().data('contextMenu').$menu : null;\n            if ($menu) {\n                $menu.trigger('contextmenu:hide');\n            }\n        } else if (operation === 'destroy') {\n            $.contextMenu('destroy', {context: this});\n        } else if (operation === 'update') {\n            $.contextMenu('update', {context: this});\n        } else if ($.isPlainObject(operation)) {\n            operation.context = this;\n            $.contextMenu('create', operation);\n        } else if (operation === true) {\n            $t.removeClass('context-menu-disabled');\n        } else if (operation === false) {\n            $t.addClass('context-menu-disabled');\n        }\n    } else {\n        // eslint-disable-next-line no-undef\n        $.each($.contextMenu.menus, function () {\n            if (this.selector === $t.selector) {\n                $o.data = this;\n\n                $.extend($o.data, {trigger: 'demand'});\n            }\n        });\n\n        $.contextMenu.handle.contextmenu.call($o.target, $o);\n    }\n\n    return this;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/jquery/contextMenuFunction.js"],"sourceRoot":""}